(this["webpackJsonpblog-posts"]=this["webpackJsonpblog-posts"]||[]).push([[0],{194:function(e,t,n){e.exports={Page:"layout_Page__12juo",Logo:"layout_Logo__2Aspl",Content:"layout_Content__1sn_G"}},195:function(e,t,n){e.exports={PostsPage:"posts-page_PostsPage__2_w5s",HeaderInputWrapper:"posts-page_HeaderInputWrapper__30096",HeaderButtonsWrapper:"posts-page_HeaderButtonsWrapper__1f2zY"}},260:function(e,t,n){e.exports={PostCard:"post-card_PostCard__3tLfu"}},305:function(e,t,n){},440:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),s=n(35),o=n.n(s),i=(n(305),n(306),n(307),n(217)),u=n(31),l=n(10),j=n.n(l),b=n(38),p=n(50),h=n(55),d=n(446),O=n(36),f=n(449),m=n(107),x=n(39),v=n(86),g=n(443),y=n(56),w=n(445),k=n(270),C=n(6),S=n(271),A=n(187),N=n(447);!function(e){e.HOME="/",e.POSTS="/posts",e.AUTHORS="/authors"}(r||(r={}));var F={posts:{id:"posts",name:"Postagens",path:r.POSTS,icon:A.a},authors:{id:"authors",name:"Autores",path:r.AUTHORS,icon:N.a}},P=n(74),T=n(45),_=function e(){var t=this;Object(P.a)(this,e),this.collapsed=!1,this.setCollapsed=function(e){t.collapsed=e},Object(T.d)(this)},D=n(255),I=n.n(D).a.create({baseURL:"https://blog-posts-server.caiocampos.repl.co",proxy:!1}),E=function e(){Object(P.a)(this,e)};E.getAll=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/posts".concat(t?"?authorName=".concat(t):""),{headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E.create=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/authors/".concat(t,"/posts"),n,{headers:{"Content-Type":"application/json"}});case 2:return r=e.sent,a=r.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E.delete=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.delete("/posts/".concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var L=function e(t){var n=this;Object(P.a)(this,e),this.mainStore=void 0,this.getAll=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.getAll(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),n.mainStore.setErrorFromAxios(e.t0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),this.create=function(){var e=Object(b.a)(j.a.mark((function e(t,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.create(t,r);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),n.mainStore.setErrorFromAxios(e.t0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.delete(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),n.mainStore.setErrorFromAxios(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Object(T.d)(this,{mainStore:!1}),this.mainStore=t},H=function e(){Object(P.a)(this,e)};H.getAll=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/authors",{headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),H.create=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/authors",t,{headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H.delete=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.delete("/authors/".concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var B=function e(t){var n=this;Object(P.a)(this,e),this.mainStore=void 0,this.getAll=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.getAll();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),n.mainStore.setErrorFromAxios(e.t0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),this.create=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.create(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),n.mainStore.setErrorFromAxios(e.t0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.delete(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),n.mainStore.setErrorFromAxios(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),Object(T.d)(this,{mainStore:!1}),this.mainStore=t},Y=function(e){return function(e){var t,n,r=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||(null===e||void 0===e?void 0:e.message);return Array.isArray(r)?r.join(" "):""+r}(e)||"N\xe3o foi poss\xedvel realizar a solicita\xe7\xe3o"},M=Object(a.createContext)(new function e(){var t=this;Object(P.a)(this,e),this.error=null,this.layout=void 0,this.authors=void 0,this.posts=void 0,this.setError=function(e){t.error=e},this.setErrorFromAxios=function(e){console.warn(e),t.error=Y(e)},this.clearError=function(){t.error=null},this.layout=new _,this.authors=new B(this),this.posts=new L(this),Object(T.d)(this,{authors:!1,posts:!1})}),R=function(){return Object(a.useContext)(M)},z=n(194),W=n.n(z),U=n(15),q=g.a.Content,J=g.a.Sider,K=Object(m.a)((function(e){var t=e.children,n=e.title,r=e.subtitle,a=e.className,c=Object(v.a)(e,["children","title","subtitle","className"]),s=Object(u.e)(),o=Object(u.f)(),i=R(),l=i.error,j=i.clearError,b=i.layout,p=b.collapsed,h=b.setCollapsed,d=(s.pathname||"").slice(1),O=F[d]||{};return Object(U.jsx)(C.b,{locale:S.a,children:Object(U.jsxs)(g.a,Object(x.a)(Object(x.a)({className:"".concat(W.a.Page," ").concat(a)},c),{},{children:[Object(U.jsxs)(J,{collapsible:!0,collapsed:p,onCollapse:h,children:[Object(U.jsx)("div",{className:W.a.Logo}),Object(U.jsx)(y.a,{theme:"dark",selectedKeys:[O.id],mode:"inline",children:Object.values(F).map((function(e){var t=e.id,n=e.icon,r=e.path,a=e.name;return Object(U.jsx)(y.a.Item,{icon:Object(U.jsx)(n,{}),onClick:function(){return o(r)},children:a},t)}))})]}),Object(U.jsx)(g.a,{children:Object(U.jsxs)(w.a,{title:n,subTitle:r,children:[Object(U.jsx)(k.a,{title:"Basic Modal",visible:!!l,onOk:j,onCancel:j,children:l}),Object(U.jsx)(q,{className:W.a.Content,children:t})]})})]}))})})),G=n(40),Q=n(276),V=n(83),X=Object(m.a)((function(e){var t=e.onChange,n=Object(v.a)(e,["onChange"]),r=Object(a.useState)(!1),c=Object(p.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)([]),u=Object(p.a)(i,2),l=u[0],h=u[1],d=R().authors.getAll;return Object(a.useEffect)((function(){var e=!1;return o(!0),function(){var t=Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:n=t.sent,e||(h(n.map((function(e){return{label:"".concat(e.name," (").concat(e.nickname,")"),value:e.id}}))),o(!1));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!0}}),[d]),Object(U.jsx)(V.a,Object(x.a)(Object(x.a)({loading:s},n),{},{options:l,onChange:t}))})),Z={rowKey:"key",pagination:{showQuickJumper:!0},dateFormatter:"string",search:!1},$={labelCol:{span:8},wrapperCol:{span:16}},ee={wrapperCol:{offset:8,span:16}},te=[{required:!0}],ne=h.a.TextArea,re=function(e){var t=e.onSubmit,n=e.className,r=Object(v.a)(e,["onSubmit","className"]),c=Object(a.useState)(!1),s=Object(p.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(!1),l=Object(p.a)(u,2),d=l[0],f=l[1],m=G.a.useForm(),g=Object(p.a)(m,1)[0],y=function(){var e=Object(b.a)(j.a.mark((function e(n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),r={title:n.title,body:n.body},e.next=4,t(n.author,r);case 4:f(!1),i(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(O.a,Object(x.a)(Object(x.a)({type:"primary",onClick:function(){g.resetFields(),f(!1),i(!0)},icon:Object(U.jsx)(Q.a,{}),className:n},r),{},{children:"Novo"})),Object(U.jsx)(k.a,{title:"Nova Postagem",visible:o,footer:null,onCancel:function(){return i(!1)},children:Object(U.jsxs)(G.a,Object(x.a)(Object(x.a)({},$),{},{form:g,name:"control-hooks",onFinish:y,children:[Object(U.jsx)(G.a.Item,{name:"title",label:"T\xedtulo",rules:te,children:Object(U.jsx)(h.a,{})}),Object(U.jsx)(G.a.Item,{name:"body",label:"Texto",rules:te,children:Object(U.jsx)(ne,{})}),Object(U.jsx)(G.a.Item,{name:"author",label:"Autor",rules:te,children:Object(U.jsx)(X,{})}),Object(U.jsxs)(G.a.Item,Object(x.a)(Object(x.a)({},ee),{},{children:[Object(U.jsx)(O.a,{type:"primary",htmlType:"submit",loading:d,children:"Criar"}),Object(U.jsx)(O.a,{htmlType:"button",onClick:function(){g.resetFields()},children:"Limpar"})]}))]}))})]})},ae=n(273),ce=n(261),se=n(32),oe=n(448),ie=n(260),ue=n.n(ie),le=function(e){var t=e.id,n=e.title,r=e.body,a=e.creationDate,c=e.authorName,s=e.authorNickname,o=e.deletePost,i=e.className,u=Object(v.a)(e,["id","title","body","creationDate","authorName","authorNickname","deletePost","className"]);return Object(U.jsx)(ae.a,Object(x.a)(Object(x.a)({},u),{},{className:"".concat(ue.a.PostCard," ").concat(i),title:n,extra:Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{children:["Autor: ",c," (",s,")"]}),Object(U.jsxs)("div",{children:["Data: ",new Date(a).toLocaleDateString()]})]}),actions:[Object(U.jsx)(ce.a,{title:"Title",onConfirm:function(){return o(t)},children:Object(U.jsx)(se.a,{title:"Apagar",placement:"bottom",children:Object(U.jsx)(O.a,{type:"primary",icon:Object(U.jsx)(oe.a,{}),size:"small",danger:!0,children:"Apagar"})})})],children:r}))},je=n(195),be=n.n(je),pe=h.a.Search,he=Object(m.a)((function(){var e=R().posts,t=Object(a.useState)(!1),n=Object(p.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!0),o=Object(p.a)(s,2),i=o[0],u=o[1],l=Object(a.useState)(""),h=Object(p.a)(l,2),m=h[0],x=h[1],v=Object(a.useState)([]),g=Object(p.a)(v,2),y=g[0],w=g[1],k=Object(a.useCallback)(Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAll(m);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),[e,m]);Object(a.useEffect)((function(){var e=!1;return i&&(c(!0),k().then((function(t){e||(w(t),u(!1),c(!1))}))),function(){e=!0}}),[i,k]);var C=Object(a.useCallback)(function(){var t=Object(b.a)(j.a.mark((function t(n,r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.create(n,r);case 2:u(!0);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),[e]),S=Object(a.useCallback)(function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delete(n);case 2:u(!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(U.jsx)(K,{title:"Postagens",className:be.a.PostsPage,children:Object(U.jsx)(d.b,{loading:r,size:"small",dataSource:y,header:Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{className:be.a.HeaderInputWrapper,children:Object(U.jsx)(pe,{placeholder:"Busque por autor",onSearch:function(e){x(e),u(!0)},enterButton:!0,allowClear:!0,disabled:!m&&0===y.length})}),Object(U.jsxs)("div",{className:be.a.HeaderButtonsWrapper,children:[Object(U.jsx)(re,{onSubmit:C}),Object(U.jsx)(O.a,{type:"text",shape:"circle",size:"middle",icon:Object(U.jsx)(f.a,{}),loading:r,onClick:function(){return u(!0)}})]})]}),renderItem:function(e){var t=e.id,n=e.title,r=e.body,a=e.creationDate,c=e.author;return Object(U.jsx)(le,{id:t,title:n,body:r,creationDate:a,authorName:c.name,authorNickname:c.nickname,deletePost:S},t)}})})})),de=n(268),Oe=n(77),fe=function(e){return Object(U.jsx)(Oe.a,Object(x.a)({format:"DD/MM/YYYY"},e))},me=function(e){var t=e.onSubmit,n=e.className,r=Object(v.a)(e,["onSubmit","className"]),c=Object(a.useState)(!1),s=Object(p.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(!1),l=Object(p.a)(u,2),d=l[0],f=l[1],m=G.a.useForm(),g=Object(p.a)(m,1)[0],y=function(){var e=Object(b.a)(j.a.mark((function e(n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),r=n,r=Object(x.a)(Object(x.a)({},r),{},{birthDate:r.birthDate.format("YYYY-MM-DD")}),e.next=5,t(r);case 5:f(!1),i(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(O.a,Object(x.a)(Object(x.a)({type:"primary",onClick:function(){g.resetFields(),f(!1),i(!0)},icon:Object(U.jsx)(Q.a,{}),className:n},r),{},{children:"Novo"})),Object(U.jsx)(k.a,{title:"Novo Author",visible:o,footer:null,onCancel:function(){return i(!1)},children:Object(U.jsxs)(G.a,Object(x.a)(Object(x.a)({},$),{},{form:g,name:"control-hooks",onFinish:y,children:[Object(U.jsx)(G.a.Item,{name:"name",label:"Nome",rules:te,children:Object(U.jsx)(h.a,{})}),Object(U.jsx)(G.a.Item,{name:"nickname",label:"Apelido",rules:te,children:Object(U.jsx)(h.a,{})}),Object(U.jsx)(G.a.Item,{name:"birthDate",label:"Data de Nascimento",rules:te,children:Object(U.jsx)(fe,{})}),Object(U.jsxs)(G.a.Item,Object(x.a)(Object(x.a)({},ee),{},{children:[Object(U.jsx)(O.a,{type:"primary",htmlType:"submit",loading:d,children:"Criar"}),Object(U.jsx)(O.a,{htmlType:"button",onClick:function(){g.resetFields()},children:"Limpar"})]}))]}))})]})},xe=[{title:"Nome",dataIndex:"name",key:"name",search:!1},{title:"Apelido",dataIndex:"nickname",key:"nickname",search:!1},{title:"Data de Nascimento",dataIndex:"birthDate",key:"birthDate",search:!1,renderText:function(e){return new Date(e).toLocaleDateString()}}],ve=Object(m.a)((function(){var e=R().authors,t=Object(a.useRef)(),n=Object(a.useCallback)(Object(b.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAll();case 2:return n=t.sent,t.abrupt("return",{data:n,success:!0});case 4:case"end":return t.stop()}}),t)}))),[e]),r=Object(a.useCallback)(function(){var n=Object(b.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.create(r);case 2:null===t||void 0===t||null===(a=t.current)||void 0===a||a.reload();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e]),c=Object(a.useCallback)(function(){var n=Object(b.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.delete(r);case 2:null===t||void 0===t||null===(a=t.current)||void 0===a||a.reload();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e]),s=Object(a.useMemo)((function(){return function(e){return xe.concat({title:"A\xe7\xf5es",key:"actions",render:function(t,n){return[Object(U.jsx)("div",{className:"cell-button-group",children:Object(U.jsx)(ce.a,{title:"Title",onConfirm:function(){return e(n.id)},children:Object(U.jsx)(se.a,{title:"Apagar",placement:"bottom",children:Object(U.jsx)(O.a,{type:"primary",shape:"circle",icon:Object(U.jsx)(oe.a,{}),size:"small",danger:!0})})})},"bg")]}})}(c)}),[c]);return Object(U.jsx)(K,{title:"Autores",children:Object(U.jsx)(de.a,Object(x.a)(Object(x.a)({},Z),{},{actionRef:t,headerTitle:"Autores",rowKey:"id",request:n,columns:s,toolBarRender:function(){return[Object(U.jsx)(me,{onSubmit:r},"ea")]}}))})})),ge=function(){return Object(U.jsx)(K,{title:"P\xe1gina n\xe3o encontrada"})},ye=function(){return Object(U.jsx)(i.a,{basename:"/blog-posts",children:Object(U.jsxs)(u.c,{children:[Object(U.jsx)(u.a,{index:!0,element:Object(U.jsx)(he,{})}),Object(U.jsx)(u.a,{path:r.POSTS,element:Object(U.jsx)(he,{})}),Object(U.jsx)(u.a,{path:r.AUTHORS,element:Object(U.jsx)(ve,{})}),Object(U.jsx)(u.a,{path:"*",element:Object(U.jsx)(ge,{})})]})})},we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,450)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};o.a.render(Object(U.jsx)(c.a.StrictMode,{children:Object(U.jsx)(ye,{})}),document.getElementById("root")),we()}},[[440,1,2]]]);
//# sourceMappingURL=main.ae80b897.chunk.js.map